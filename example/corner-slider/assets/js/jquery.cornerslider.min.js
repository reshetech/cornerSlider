/**
 * ! jQuery.cornerSlider | (c) 2015 reshetech.co.il
 */
(function($,document,window){$.fn.cornerSlider=function(options){var settings=$.extend({showAtScrollingHeight:1300,elemToPresent:"#presentSlider",directionEffect:"right",bottom:6,right:6,left:6,top:6,speedEffect:300,cookieMinutesToExpiry:15,onShow:function(){},onHide:function(){},onClose:function(){},},options);var cornerSliderElem=$(this),cornerSliderElemWidth=cornerSliderElem.outerWidth(),cornerSliderElemHeight=cornerSliderElem.outerHeight(),direction="right";var cookieName='cornerSliderHide',cookieValue='hidden';function setCookie(name,value,minutes){var expires,minutes=parseInt(minutes);if(minutes&&minutes>0){var date=new Date();date.setTime(date.getTime()+(minutes*60*1000));expires='; expires='+date.toGMTString()}else{expires=''}document.cookie=name+'='+value+expires+'; path=/'}function isValidCookie(cName){var cStart,cEnd,cookieVal;if(document.cookie.length<1)return false;cStart=document.cookie.indexOf(cName+'=');if(cStart<0)return false;cStart=cStart+cName.length+1;cEnd=document.cookie.indexOf(';',cStart);if(cEnd==-1)cEnd=document.cookie.length;cookieVal=unescape(document.cookie.substring(cStart,cEnd));return(cookieVal.length>0)}function isAllowedCornerSlider(cookieName){if(isValidCookie(cookieName))return false;return true}function cornerSliderAppear(elem){elem.removeClass('hidden').addClass('shown').stop();if(settings.directionEffect=='right'){elem.animate({'right':settings.right},settings.speedEffect,function(){})}else if(direction=='bottom'){elem.animate({'bottom':settings.bottom},settings.speedEffect,function(){})}else{elem.animate({'left':settings.left},settings.speedEffect,function(){})}settings.onShow.call(elem)}function cornerSliderDisAppear(elem,width,close){elem.stop();if(settings.directionEffect=='right'){elem.animate({'right':-width},settings.speedEffect,function(){elem.removeClass('shown').addClass('hidden')})}else if(direction=='bottom'){height=cornerSliderElemHeight;elem.animate({'bottom':-height},settings.speedEffect,function(){elem.removeClass('shown').addClass('hidden')})}else{elem.animate({'left':-width},settings.speedEffect,function(){elem.removeClass('shown').addClass('hidden')})}if(close){settings.onClose.call(elem)}else{settings.onHide.call(elem)}}cornerSliderElem.find('.close').on('click',function(){cornerSliderDisAppear(cornerSliderElem,cornerSliderElemWidth,true);setCookie(cookieName,cookieValue,settings.cookieMinutesToExpiry)});$(window).scroll(function(){var scrollTopInt=parseInt($(window).scrollTop());var winHeight=parseInt(window.innerHeight);var h1=scrollTopInt+winHeight;var h2=$(settings.elemToPresent).length==0?settings.showAtScrollingHeight:parseInt($(settings.elemToPresent).offset().top);if(h1>h2){console.log(cornerSliderElem.hasClass('hidden'));console.log(isAllowedCornerSlider(cookieName));if(cornerSliderElem.hasClass('hidden')&&isAllowedCornerSlider(cookieName)){cornerSliderAppear(cornerSliderElem)}}else if(cornerSliderElem.hasClass('shown')){cornerSliderDisAppear(cornerSliderElem,cornerSliderElemWidth,false)}});(function init(){width=cornerSliderElemWidth;height=cornerSliderElemHeight;direction=(settings.directionEffect=='left'||settings.directionEffect=='right')?settings.directionEffect:"bottom";cornerSliderElem.css({'bottom':settings.bottom});if(direction=='left')cornerSliderElem.css({'left':-width});else if(direction=='right')cornerSliderElem.css({'right':-width});else{if(direction=='bottom')cornerSliderElem.css({'bottom':-height});if(settings.directionEffect=='bottom left')cornerSliderElem.css({'left':settings.left});else if(settings.directionEffect=='bottom center')cornerSliderElem.css({'margin-right':'auto','margin-left':'auto','right':0,'left':0});else if(settings.directionEffect=='bottom right')cornerSliderElem.css({'right':settings.right});else cornerSliderElem.css({'right':settings.right})}}())}}(jQuery,document,window));